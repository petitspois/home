" vim:set et ft=vim fdm=marker sw=4 sts=4 ts=4 nopaste :

" [ Setting ]"{{{
"""""""""""""""""""""""""""""""""""""""""""""
" 绝对路径 夸平台行降低，注意不能在等于号两边添加 "空格"
set runtimepath=$HOME/.vimperator
source! $HOME/.vimperatorrc.local
" 加载 runtimepath 定义路径下面的文件。将其他定义，独立出来，可以控制是否加载
runt ab.vimp
colorscheme status

"source! /home/king/.vimperator/colors/status.vimp
"source! ~/.vimperatorrc.local



"}}}

" [ Option 选项 ]"{{{
""""""""""""""""""""""""""""""""""""""""""""
set titlestring=Namoroka
set visualbell
set history=25
set smartcase
" 命令行 自动补全
"set wildoptions=auto
set wildmode=list:full
" 默认为普通模式，非插入模式
"set focuscontent

set editor="xterm -e vim -c ':colorscheme jellybeans' -f"

" [[ 与 ]] 跳转到下一页的链接识别
set nextpattern=\s*下一页|下一张|下一篇|下一頁|下页|后页\s*,^\\bnext\\b,\\bnext\\b,^>$,^(>>|››|»)$,^(>|»),(>|»)$,\\bmore\\b
set previouspattern=\s*上一页|上一张|上一篇|上一頁|上页|前页\s*,^\\bprev|previous\\b, \\bprev|previous\\b,^<$,^(<<|‹‹|«)$,^(<|«)$,(<|«)$

" [ 未知 选项 ]
"""""""""""""""""""""""""""""""""""""""""
"set popups=2
"set complete=lfbs




"}}}

" [ map 快捷键 ]"{{{
""""""""""""""""""""""""""""""""""""""""""""
""noremap     nvo
""nnoremap    n

" 屏幕滚动
noremap j 5j
noremap k 5k
noremap J <C-d>
noremap K <C-u>
" Show Menu 显示 菜单栏，[   可用 ]
"noremap 0m   :set guioptions+=m<CR>
" Hide Menu 隐藏 菜单栏，[ 不可用 ]
"noremap 1m   :set guioptions-=m<CR>
" Menu 显示/隐藏 菜单栏 开关
noremap <F2> :set guioptions!=m<CR>
" 停止 加载页面
noremap s <C-c>
""noremap m :mark 

" 标签页 切换
"noremap T <C-^>
noremap <F11> gT
noremap <F12> gt
inoremap <F11> <esc>gT
inoremap <F12> <esc>gt

let mapleader =','
noremap <leader>p   gT
noremap <leader>n   gt
noremap <leader>a   :dialog     addons<CR>
noremap <leader>b   :sidebar    BookMarks<CR>
noremap <leader>B   :dialog     BookMarks<CR>
noremap <leader>c   :dialog     cleardata<CR>
noremap <leader>C   :dialog     cookies<CR>
" 打开 Delicious 侧栏"
noremap <leader>d   :sidebar    Delicious<CR>
noremap <leader>D   :dialog     downloads<CR>
noremap <leader>h   :sidebar    history<CR>
noremap <leader>H   :dialog     history<CR>
noremap <leader>i   :dialog     pageinfo<CR>
noremap <leader>I   :dialog     import<CR>
" 若不注释与 m 有关的按键定义，会与 mark 标记冲突
""noremap <leader>m   :dialog     addbookmark<CR>
noremap <leader>o   :dialog     openfile<CR>
noremap <leader>p   :dialog     preferences<CR>
" 书签 / 历史记录 详细管理
noremap <leader>P   :dialog     places<CR>
noremap <leader>q   ZZ
noremap <leader>r   :restart<CR>
"noremap <leader>s   :dialog     pagesource<CR>

noremap <leader>s   :source ~/.vimperatorrc

"map < <C-6>
"noremap > g$
"noremap , <C-o>
"noremap . <C-i>
"map U :ju<CR>
"map <C-.> :tabm<CR>

"" 想办法再减少按键频率
"noremap g gg
" 查看源码 开/关
"noremap S gf
"noremap " gn
"noremap ] ]]
"noremap [ [[


" [ Firefox keyshot ]"{{{
"""""""""""""""""""""""""""""""""""""""""""""

" 解决全选、复制、粘帖、剪切和撤销与vimperator冲突的问题
"noremap <C-V> <C-v>
"noremap <C-Z> <C-z>
"noremap <C-c> <C-v><C-c>
"noremap <C-a> <C-v><C-a>
"cnoremap <C-c> <C-v><C-c>
"cnoremap <C-v> <C-v><C-v>
"cnoremap <C-x> <C-v><C-x>
" 粘贴 为 Shift - Insert
" 复制 粘贴 剪切 全选 撤销
inoremap <C-c> <C-v><C-c>
inoremap <C-v> <C-v><C-v>
inoremap <C-x> <C-v><C-x>
inoremap <C-a> <C-v><C-a>
inoremap <C-z> <C-v><C-z>
inoremap <C-y> <C-v><C-y>
" 复制 / 粘贴 / 剪切
vnoremap <C-c> <C-v><C-c>
vnoremap <C-v> <C-v><C-v>
vnoremap <C-x> <C-v><C-x>

" 还原书签栏
"noremap <C-b> <C-v><C-b>
" 还原 ctrl-k 跳到搜索栏
"noremap <C-k> <C-v><A-d><Tab>


"}}}


" 让Greader/Gmail等键盘命令不受到影响
autocmd LocationChange .* js modes.passAllKeys = /.*(mail\.google\.com|www\.google\.com\/reader).*/.test(buffer.URL)

"}}}

" [ Function ]"{{{
"""""""""""""""""""""""""""""""""""""""""""""





"}}}

" [ Uncertainly ]"{{{
"""""""""""""""""""""""""""""""""""""""""""""

" From: http://github.com/roylez/dotfiles/blame/master/.vimperatorrc

"map <silent> <leader>t :exe ":tinyurl "+getBrowser().contentWindow.location.href<CR>
"loadplugins
"set flashblock
"set fbw=youtube.com,hfest.net,youku.com,google.com,bloomberg.com,adobe.com,github.com,ku6.com
"nmap \w \fbwhitelist



"}}}





